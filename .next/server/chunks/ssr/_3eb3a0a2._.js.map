{"version":3,"sources":["../../../../node_modules/next/src/server/route-modules/app-page/vendored/contexts/app-router-context.ts","../../../../node_modules/next/src/server/route-modules/app-page/vendored/ssr/react-server-dom-turbopack-client.ts","../../../../src/app/admin/page.tsx"],"sourcesContent":["module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['contexts'].AppRouterContext\n","module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['react-ssr']!.ReactServerDOMTurbopackClient\n","\r\n'use client';\r\n\r\nimport { useState } from 'react';\r\nimport { supabase } from '@/utils/supabase/client';\r\nimport Link from 'next/link';\r\nimport { Database } from '@/types/supabase';\r\n\r\ntype ProductInsert = Database['public']['Tables']['products']['Insert'];\r\n\r\nexport default function AdminPage() {\r\n    const [jsonInput, setJsonInput] = useState('');\r\n    const [status, setStatus] = useState<{ type: 'success' | 'error' | 'idle'; message: string }>({ type: 'idle', message: '' });\r\n    const [isUploading, setIsUploading] = useState(false);\r\n\r\n    const handleUpload = async () => {\r\n        setIsUploading(true);\r\n        setStatus({ type: 'idle', message: '' });\r\n\r\n        try {\r\n            let products: ProductInsert[];\r\n            try {\r\n                products = JSON.parse(jsonInput);\r\n                if (!Array.isArray(products)) {\r\n                    throw new Error('Input must be a JSON array of products.');\r\n                }\r\n            } catch (e) {\r\n                throw new Error('Invalid JSON format. Please check your syntax.');\r\n            }\r\n\r\n            const { data, error } = await supabase\r\n                .from('products')\r\n                .insert(products)\r\n                .select();\r\n\r\n            if (error) {\r\n                throw new Error(error.message);\r\n            }\r\n\r\n            setStatus({ type: 'success', message: `Successfully uploaded ${data.length} products!` });\r\n            setJsonInput('');\r\n        } catch (err: any) {\r\n            setStatus({ type: 'error', message: err.message || 'An unknown error occurred.' });\r\n        } finally {\r\n            setIsUploading(false);\r\n        }\r\n    };\r\n\r\n    const loadSample = () => {\r\n        const sampleData = [\r\n            {\r\n                name: \"Premium Coffee Beans\",\r\n                description: \"Organic Ethiopian Yirgacheffe coffee beans, 500g.\",\r\n                price: 450,\r\n                category: \"Food & Drink\",\r\n                image_url: \"https://images.unsplash.com/photo-1559056199-641a0ac8b55e?auto=format&fit=crop&q=80&w=1000\"\r\n            },\r\n            {\r\n                name: \"Leather Wallet\",\r\n                description: \"Handcrafted genuine leather wallet with multiple card slots.\",\r\n                price: 1200,\r\n                category: \"Fashion\",\r\n                image_url: \"https://images.unsplash.com/photo-1627123424574-724758594e93?auto=format&fit=crop&q=80&w=1000\"\r\n            },\r\n            {\r\n                name: \"Wireless Earbuds\",\r\n                description: \"High-quality sound with noise cancellation functionality.\",\r\n                price: 3500,\r\n                category: \"Electronics\",\r\n                image_url: \"https://images.unsplash.com/photo-1590658268037-6bf12165a8df?auto=format&fit=crop&q=80&w=1000\"\r\n            }\r\n        ];\r\n        setJsonInput(JSON.stringify(sampleData, null, 2));\r\n    };\r\n\r\n    return (\r\n        <div className=\"min-h-screen bg-gray-50 dark:bg-gray-900 p-8 font-sans\">\r\n            <div className=\"max-w-2xl mx-auto bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6\">\r\n                <div className=\"flex items-center justify-between mb-6\">\r\n                    <h1 className=\"text-2xl font-bold text-gray-900 dark:text-white\">Admin Bulk Upload</h1>\r\n                    <Link href=\"/\" className=\"text-blue-600 hover:underline text-sm\">Return to Store</Link>\r\n                </div>\r\n\r\n                <div className=\"mb-4 p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg border border-blue-100 dark:border-blue-800\">\r\n                    <h3 className=\"font-semibold text-blue-800 dark:text-blue-300 mb-2\">Instructions</h3>\r\n                    <p className=\"text-sm text-blue-700 dark:text-blue-200 mb-2\">\r\n                        1. Paste your product data as a JSON array below.\r\n                    </p>\r\n                    <p className=\"text-sm text-blue-700 dark:text-blue-200\">\r\n                        2. <strong>Important:</strong> Ensure your Supabase <code>products</code> table has an INSERT policy enabled for public/anon users (for this MVP) or use authenticated role.\r\n                    </p>\r\n                </div>\r\n\r\n                <div className=\"mb-4\">\r\n                    <div className=\"flex justify-between mb-2\">\r\n                        <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300\">Product JSON</label>\r\n                        <button onClick={loadSample} className=\"text-xs text-blue-600 hover:underline\">Load Sample Data</button>\r\n                    </div>\r\n                    <textarea\r\n                        value={jsonInput}\r\n                        onChange={(e) => setJsonInput(e.target.value)}\r\n                        className=\"w-full h-64 p-3 border border-gray-300 dark:border-gray-700 rounded-lg font-mono text-sm bg-gray-50 dark:bg-gray-900 text-gray-800 dark:text-gray-200 focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\r\n                        placeholder='[{\"name\": \"Item 1\", \"price\": 100, ...}]'\r\n                    />\r\n                </div>\r\n\r\n                {status.message && (\r\n                    <div className={`p-4 rounded-lg mb-4 ${status.type === 'success' ? 'bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-300' : 'bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-300'}`}>\r\n                        {status.message}\r\n                    </div>\r\n                )}\r\n\r\n                <button\r\n                    onClick={handleUpload}\r\n                    disabled={isUploading || !jsonInput}\r\n                    className={`w-full py-3 px-4 rounded-lg font-bold text-white transition-colors ${isUploading ? 'bg-gray-400 cursor-not-allowed' : 'bg-blue-600 hover:bg-blue-700'}`}\r\n                >\r\n                    {isUploading ? 'Uploading...' : 'Upload Products'}\r\n                </button>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n"],"names":["module","exports","require","vendored","AppRouterContext","ReactServerDOMTurbopackClient"],"mappings":"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","ignoreList":[0,1]}